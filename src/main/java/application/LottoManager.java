package application;

import domain.Ball;
import domain.Lotto;
import domain.Purchase;
import domain.WinningLotto;
import view.LottoGuidePrinter;
import view.LottoScanner;

import java.util.List;

public class LottoManager {

    public static void run() {
        Purchase purchase = inputPurchaseInformation();
        WinningLotto winningLotto = inputWinnningLotto();
        LottoResultManager resultManager = new LottoResultManager(winningLotto, purchase.getAutoGeneratedLotto());
        LottoGuidePrinter.printLottoResult(purchase.getAmount(), resultManager.getMatchingResult(), resultManager.getTotalPrizeMoney());
    }

    private static Purchase inputPurchaseInformation() {
        int amount = LottoScanner.getPurchaseQuantity();
        List<Lotto> autoGeneratedLotto = purchaseAutoGeneratedLotto(Purchase.purchaseableQuantity(amount));
        Purchase purchase = new Purchase(amount, autoGeneratedLotto);
        LottoGuidePrinter.alertPurchaseQuantity(purchase.getTotalPurchaseQuantity());
        return purchase;
    }

    private static List<Lotto> purchaseAutoGeneratedLotto(int quantity) {
        AutoGeneratedLottoPurchaser lottoPurchaser = new AutoGeneratedLottoPurchaser();
        List<Lotto> lottoList = lottoPurchaser.generateLotto(quantity);
        LottoGuidePrinter.printLottoList(lottoList);
        return lottoList;
    }

    private static WinningLotto inputWinnningLotto() {
        List<Ball> winningLottoNumbers = LottoScanner.getWinningLottoNumbers();
        Ball bonusBall = LottoScanner.getBonusBall(winningLottoNumbers);
        return new WinningLotto(winningLottoNumbers, bonusBall);
    }
}
